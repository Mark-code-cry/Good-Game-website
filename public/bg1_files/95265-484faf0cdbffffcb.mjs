(self.modernJsonp=self.modernJsonp||[]).push([["95265"],{939672:function(e,t,n){n.d(t,{$A:()=>h,B4:()=>y,N0:()=>v,N3:()=>b,VK:()=>_,_J:()=>w,mW:()=>g});var i=n(281098),a=n(667294),r=n(503246),o=n(603316),s=n(785893);let l={},u={},d={},c=!1,m=0,p={},f=(0,a.createContext)({setMetric:()=>void 0,setRawData:()=>void 0,setRmaData:()=>void 0,updateCommitTimeMap:()=>void 0,commitTimeMap:{}});function g({children:e}){(0,a.useEffect)(()=>{(0,i.Z)("RenderPerformanceContext","/app/common/react/components/ProfilerWithStats/RenderPerformanceContext.tsx")},[]);let t=(0,a.useCallback)((e,t,n)=>{l[e]||(l[e]={}),l[e][t]=n},[]),n=(0,a.useCallback)((e,t,n)=>{d[e]||(d[e]={}),d[e][t]||(d[e][t]=[]),d[e][t].push(n)},[]),o=(0,a.useCallback)(({id:e,path:t,fragmentName:n,executionTime:i,newData:a})=>{if(c)return;let o=`${n}.${e}`;u[t]||(u[t]={}),u[t][o]||(u[t][o]={totalRenderTime:0,previousData:{},renderCount:0,resultUpdatedCount:0,wastedTime:0});let s=u[t][o];(0,r.ZP)(a,s.previousData)?(s.wastedTime+=i,m+=i):s.resultUpdatedCount+=1,s.totalRenderTime+=i,s.renderCount+=1,s.previousData=a},[]),g=(0,a.useCallback)((e,t)=>{let n=`${Math.floor(e)}`;p[n]?p[n].push(t):p[n]=[t]},[]),_=(0,a.useMemo)(()=>({setMetric:t,setRawData:n,setRmaData:o,updateCommitTimeMap:g,commitTimeMap:p}),[t,o,n,g]);return(0,s.jsx)(f,{value:_,children:e})}function _(){return(0,a.use)(f)}function h(e){let t=function(){let e=Object.keys(p),t=e.length,n=e.sort().slice(0,t),i={};return n.forEach(e=>{let t=p[e];if(!t)return;let n=t.sort((e,t)=>e.startTime-t.startTime);for(let e=0;e<n.length;e+=1){let t=n[e],a=n[e+1];if(t&&a){let{startTime:e,id:n,actualDuration:r}=t,{startTime:o}=a,s=o<e+r?o-e:r;i[n]||(i[n]=0),i[n]+=s}else if(t){let{actualDuration:e,id:n}=t;i[n]||(i[n]=0),i[n]+=e}}}),i}();return Object.keys(t).forEach(n=>{let i=t[n];if(!i)return;let a=l[e]?.[n]?.mountTime??0,r=l[e]?.[n]?.mountCount??0,o=l[e]?.[n]?.updatesCount??0,s=Number(i.toFixed(2)),u=Number((a+s).toFixed(2)),d=o>0?Number((s/o).toFixed(2)):0,c=l[e]?.[n]?.memoizationDeltaArray??[],m=Math.max(...c),p=c.reduce((e,t)=>e+t,0)/c.length,f=l[e]?.[n]?.memoizationRatioArray??[],g=Math.max(...f),_=f.reduce((e,t)=>e+t,0)/f.length;l[e]&&l[e][n]&&(l[e][n]={...l[e][n],totalCount:r+o,totalTiming:u,updatesCount:o,updateTiming:s,averageUpdateTiming:d,maxMemoizationDelta:m,averageMemoizationDelta:p,maxMemoizationRatio:g,averageMemoizationRatio:_})}),l[e]}function y(e){return d[e]}function b(e){return["www/index.js","www/homefeed.js","www/pin/[id].js"].includes(e)}function w(e){let t=u[e],n={};c=!0,t&&Object.keys(t).length&&b(e)&&(Object.entries(t).forEach(([e,t])=>{let[i]=e.split(".");i&&!n[i]&&(n[i]=!0,(0,o.QX)(`render_stats.rma.${i}.renderCount`,t.renderCount,{sampleRate:1}),(0,o.QX)(`render_stats.rma.${i}.resultUpdatedCount`,t.resultUpdatedCount,{sampleRate:1}),(0,o.LY)(`render_stats.rma.${i}.renderTime`,t.totalRenderTime,{sampleRate:1}),(0,o.LY)(`render_stats.rma.${i}.wastedTime`,t.totalRenderTime,{sampleRate:1}))}),(0,o.LY)("render_stats.rma.totalWastedTime",m,{sampleRate:1,tags:{path:e}}))}function v(){l={},u={},d={},c=!1,m=0}},503246:function(e,t,n){function i(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(!r(e[i],t[i],n+1))return!1;return!0}function a(e,t,n){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(!(i in t)||!r(e[i],t[i],n+1))return!1;return!0}function r(e,t,n){if(n>=1e3)return!1;if(e===t)return!0;if(null==e||null==t||"object"!=typeof e&&"object"!=typeof t)return e!=e&&t!=t;let r=Object.prototype.toString.call(e);if(r!==Object.prototype.toString.call(t))return!1;switch(r){case"[object Array]":return i(e,t,n);case"[object Set]":return i(Array.from(e).sort(),Array.from(t).sort(),n);case"[object Object]":case"[object Arguments]":return a(e,t,n);case"[object Map]":return a(Object.fromEntries(e),Object.fromEntries(t),n);case"[object RegExp]":return e+""==t+"";case"[object Error]":return e.name===t.name&&e.message===t.message;default:return!1}}function o(e,t){return r(e,t,0)}n.d(t,{ZP:()=>o,qP:()=>i})},906553:function(e,t,n){n.d(t,{Z:()=>o});var i=n(19585),a=n(473728);let r=(e,t)=>{let n=t||0,i=10**n,a=+(n?e*i:e).toFixed(8),r=Math.floor(a),o=a-r,s=o>.49999999&&o<.50000001?r%2==0?r:r+1:Math.round(a);return n?s/i:s};function o(){let e=(0,i.ZP)();return(t,n,i)=>{let o=0,s=0,l=i&&i.style||void 0,u=i&&i.shortform||!1,d=i&&i.uplimit||void 0,c=i&&i.currency||void 0,m=!!d&&n>=d,p=d&&m?d:n;if("currency"===l){let{minimumFractionDigits:e,maximumFractionDigits:n}=((e,t)=>{if(t){let{minimumFractionDigits:n,maximumFractionDigits:i}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==n&&void 0!==i)return{minimumFractionDigits:n,maximumFractionDigits:i}}return{minimumFractionDigits:2,maximumFractionDigits:2}})(t,c);o=void 0===i||void 0===i.maximum_fraction_digits?n:i.maximum_fraction_digits,s=void 0===i||void 0===i.minimum_fraction_digits?e:i.minimum_fraction_digits}else o=void 0===i||void 0===i.maximum_fraction_digits?0:i.maximum_fraction_digits,s=void 0===i||void 0===i.minimum_fraction_digits?0:i.minimum_fraction_digits;if(u&&p>999&&(o=void 0===i||void 0===i.shortform_maximum_fraction_digits?2:i.shortform_maximum_fraction_digits,s=0),o<s)return String(p);let f=p,g="",_=[{"100m":{value:1e8,localeKey:e._('億', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.')}},{"10k":{value:1e4,localeKey:e._('万', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.')}}],h=[{b:{value:1e9,localeKey:e._('b', 'Used in number formatting to abbreviate large values in billions.', 'Abbreviation for one billion.')}},{m:{value:1e6,localeKey:e._('m', 'Used in number formatting to abbreviate large values in millions.', 'Abbreviation for one million.')}},{k:{value:1e3,localeKey:e._('k', 'Used in number formatting to abbreviate large values in thousands.', 'Abbreviation for one thousand.')}}],y=/^zh|ja|ko/.test(t);if(u&&p>999){let e=y?_:h;for(let t=0;t<e.length;t+=1){let n=Object.keys(e[t])[0],i=e[t][n].value;if(p>=i){f=r(p/i*Math.pow(10,o))/Math.pow(10,o),g=e[t][n].localeKey;break}}}if(null==f)return"";let b=f.toLocaleString([(e=>{try{0..toLocaleString([e])}catch(e){return!1}return!0})(t)&&"ar-SA"!==t?t:"en-US"],(({maximumFractionDigits:e,minimumFractionDigits:t,style:n,currency:i})=>{let a={maximumFractionDigits:e,minimumFractionDigits:t};return n?{...a,style:n,..."currency"===n?{currency:i,currencyDisplay:"symbol"}:{}}:a})({maximumFractionDigits:o,minimumFractionDigits:s,currency:c,style:l}));return g&&g.length>0?(0,a.Z)(e._('{{formattedNumber}}{{numberSuffix}}', 'i18n.usePrettyNumberFormat.prettyNumberFormat', 'String used to concatenate formatted number and localized number suffix'),{formattedNumber:b,numberSuffix:g})+(m?"+":""):b+(m?"+":"")}}},286036:function(e,t,n){function i(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>o});let a=new class{constructor(){i(this,"onResumeListeners",[]),i(this,"onPauseListeners",[]),i(this,"inExp",!1),i(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}},r=e=>{if(e.isHidden){let{reason:t}=e;a.windowInFocus=!1,a.onPauseListeners.forEach(e=>e(t))}else a.windowInFocus=!0,a.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>r({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>r({isHidden:!1})),window.addEventListener("blur",()=>r({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>r({isHidden:!1})),window.addEventListener("pagehide",()=>r({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>r(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>r(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let o=a},622481:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},282803:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},255957:function(e,t,n){n.d(t,{Z:()=>L});var i=n(281098),a=n(667294),r=n(286036),o=n(457636),s=n(592109),l=n(901360),u=n(392824),d=n(67831),c=n(703393),m=n(735201),p=n(868178),f=n(891631),g=n(594885),_=n(579358),h=n(970773),y=n(361423),b=n(15667),w=n(112114),v=n(603316),T=n(785893);let A=["initial_app_load","client_route_push"],E=(0,s.XV)("PwtSurface"),S="NavigationComplete",M="VisuallyComplete",I=()=>{(0,m._T)()},C=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let n=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t])),{metricConfig:{metricId:i,pwtStaticContext:a,annotateExperiments:r},annotations:s,binaryAnnotations:d,constraintMap:p,startTime:f,imageTimings:g,spans:h,traceId:y}=e;(0,u.L8)(`Report_PWT_Complete_${(0,o.KJ)(i)}`,f,n);let b=(0,c.W)({annotateExperiments:[...r??[]],annotations:s,binaryAnnotations:d,constraintMap:p,endTime:n,imageTimings:g,metricId:i,pwtStaticContext:a,startTime:f,traceId:y,spans:h});try{var t=String(b.binaryAnnotationMap["metricId.surface"].value);let e=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let n=t.name.replace(".jpg","").split("/");return{[n[n.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{});[...Array.from(document.getElementsByTagName("img")).map(t=>{let n=t.src.replace(".jpg","").split("/"),i=n[n.length-1];if(e[i]){let n=(0,_.rZ)(t)?.width||1,a=e[i].downloadSize;return{fileName:i,renderedSize:n,downloadedSize:a,ratio:a/n}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(t=>{let n=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),i=n[n.length-1];if(e[i]&&t instanceof HTMLDivElement){let n=(0,_.rZ)(t)?.width||1,a=e[i].downloadSize;return{fileName:i,renderedSize:n,downloadedSize:a,ratio:a/n}}return{fileName:i,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(e=>{let{ratio:n,fileName:i,downloadedSize:a}=e;e.ratio>1.05&&(0,l.A9)(`checkImageRatio.${t}`,{count:Math.round(10*n)/10,tags:{fileName:`${a}_${i}`}})})}catch(e){(0,l.H)("image_ratio_check_error",{error:e})}return(0,m._T)(),{...e,result:b,status:"DONE"}}return E(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},R=(e,t)=>{let{constraint:n,time:i}=t,a=(0,o.KJ)(e.metricConfig.metricId);return y.Z?e.metricConfig.constraints.find(e=>e===n)?e.constraintMap[n]?(E(`constraint "${n}" is already complete.`),(0,l.H)("duplicated_constraint_complete",{constraint:n,action:a}),e):(E(`marking constraint "${n}" as complete ${i||performance.now()}`),i?(0,u.ZP)(`constraint_${n}_is_complete`,i):(0,u.ZP)(`constraint_${n}_is_complete`),C({...e,constraintMap:{...e.constraintMap,[n]:i||y.Z.now()}})):(E(`marked constraint "${n}" is not a required constraint.`),e):((0,l.H)("missing_window_performance",{action:a}),e)},P=(e,t)=>{if(E("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{let{metricConfig:n,startTime:i,isSampled:a,disablePWTLogging:r}=t;if(r||"TIMING"!==e.status||i===e.startTime||I(),!n)return{status:"DISABLED",metricConfig:null};let s=(0,o.KJ)(n.metricId);if("TIMING"===e.status&&e.startTime===i&&e.constraintMap[S])return(0,l.H)("duplicated_init_route_action",{action:s}),e;if(!r){let e=(0,w.H)();(0,l.A9)(`handler.${s}`,{tags:{handler:e}});let t=void 0!==n.metricId.isAuthenticated&&{tags:{isAuth:n.metricId.isAuthenticated}}||void 0;"Other"===n.pwtStaticContext.browserName&&!1===n.metricId.isAuthenticated&&"initial_app_load"===n.metricId.navigationType?((0,l.A9)(`TIMING.${s}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,l.A9)(`TIMING.sampled.${s}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,l.A9)(`TIMING.${s}`),(0,l.A9)(`TIMING.sampled.${s}`,{sampleRate:.03})),(0,p.C)({resultLog:`TIMING.${s}`,annotateExperiments:n.annotateExperiments||[],getExperimentGroup:n.pwtStaticContext.getExperimentGroup,options:t})}return R({traceId:(0,m.vc)()||(0,m.ZP)("initial_app_load"===n.metricId.navigationType,n.pwtStaticContext.serverData?.trace_id),status:"TIMING",metricConfig:n,startTime:i,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:a,spans:[]},{constraint:S,disablePWTLogging:r})})(e,t.payload);if("TIMING"!==e.status)return E(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":I();let n={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:n};case"ANNOTATE":let{name:i}=t.payload;if(!y.Z)return e;let a=y.Z.now();return E(`adding annotation {${i}: ${a}}`),{...e,annotations:{...e.annotations,...{[i]:a}}};case"BINARY_ANNOTATE":let{name:r,value:s,annotationType:u}=t.payload;return E(`adding binary annotation {${r}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[r]:{value:s,type:u}}}};case"MARK_CONSTRAINT_COMPLETE":return R(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!y.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,l.H)("missing_window_performance",{action:t})}E(`removing constraint "${t}"`);let n=e.metricConfig.constraints.filter(e=>e!==t),{[t]:i,...a}=e.constraintMap;return C({...e,constraintMap:a,metricConfig:{...e.metricConfig,constraints:n}})})(e,t.payload);case"SET_SEGMENT":var d=t.payload;if(!y.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,l.H)("missing_window_performance",{action:t})}E(`updating pwt segment to "${d}"`);let c={...e.metricConfig.metricId,segment:d};return{...e,metricConfig:{...e.metricConfig,metricId:c}};case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:n}}=t;if(0===n.length)return I(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let i=Math.max(...n.map(e=>e.responseEnd||0));return R({...e,imageTimings:n},{constraint:M,time:i})}case"ADD_SUBSPAN":let{startTime:f}=e,{payload:{name:g,startTime:_,endTime:b,annotations:v,binaryAnnotations:T,parentId:A}}=t;return{...e,spans:[...e.spans,{name:g,id:(0,h.Z)(),startTime:_||f,endTime:b,annotationMap:{...v},binaryAnnotationMap:{...T},parentId:A}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,h.Z)(),startTime:y.Z?y.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let P=e.spans.findIndex(e=>e.name===t.payload.name);return P>-1?(e.spans[P].endTime=y.Z?y.Z.now():0,t.payload.annotations&&(e.spans[P].annotationMap={...e.spans[P].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[P].binaryAnnotationMap={...e.spans[P].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,l.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let N=(0,o.KJ)(e.metricConfig.metricId);return(0,l.H)("invalid_pwt_surface_action",{action:N}),e}},N=new Set;function L({children:e,...t}){(0,a.useEffect)(()=>{(0,i.Z)("PwtSurface","/app/packages/pwt-logger/PwtSurface.tsx")},[]);let n=(0,f.Z)(),s=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(n),u=t.measureGridVisuallyComplete?["web_masonry_v2"]:[],c=[...t.annotateExperiments??[],...u],{context:m}=(({surface:e,constraints:t,segment:n,measureGridVisuallyComplete:i,annotateExperiments:o,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:l,navigationType:u},sampleRate:d})=>{let c=(0,a.useRef)("NOT_SET"),m=(0,g.Z)(),{getState:p,dispatch:f}=((e,t)=>{let n=(0,a.useRef)(t);return{getState:()=>n.current,dispatch:t=>{n.current=e(n.current,t)}}})(P,{status:"DISABLED",metricConfig:null}),_=(0,b.B)();if(c.current!==l&&(c.current=l,m)){let{isAuthenticated:a}=m,r=e&&u&&(s||A).includes(u)?{metricId:{type:"surface",surface:e,navigationType:u,isAuthenticated:a,segment:n},annotateExperiments:o,constraints:[S,...t||[],...i?[M]:[]],pwtStaticContext:m}:null;(0,v.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:u,isAuthenticated:a}});let c=!N.has(l);f({type:"INIT_ROUTE",payload:{metricConfig:r,startTime:l?l.time:0,isSampled:!d||Math.random()<d,disablePWTLogging:!c}}),c&&N.add(l)}let h=p();if((0,a.useEffect)(()=>()=>{N.delete(l)},[l]),(0,a.useEffect)(()=>{let e=e=>{f({type:"ABORT",reason:e})};r.Z.onSessionPause(e);let t=window.innerHeight,n=window.innerWidth,i=()=>{let e=Math.abs(window.innerHeight-t),a=Math.abs(window.innerWidth-n),r=window.innerHeight!==t,o=window.innerWidth!==n,s={handler:(0,w.H)(),deviceType:m?.deviceType??"unknown",isAuthenticated:m?.isAuthenticated??"unknown",platform:_.userAgent.platform??"unknown"};if((0,v.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:r,widthChanged:o}}),r&&(0,v.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),o&&(0,v.S0)("webapp.PwtLogger.resizeWidthDelta",a,{sampleRate:1,tags:s}),window.removeEventListener("resize",i),m?.deviceType==="phone"&&(!o&&r&&e<=150||!r&&!o)||m?.deviceType==="desktop"&&!r&&!o)return void(0,v.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:r,widthChanged:o}});f({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",i),()=>{let t=p();E("handling unmount",t),"TIMING"===t.status&&I(),r.Z.removePauseListener(e),window.removeEventListener("resize",i)}},[]),"TIMING"!==h.status||!h.constraintMap[S])return{state:h,context:null};let{startTime:T,metricConfig:C}=h;return{state:h,context:{abort:e=>f({type:"ABORT",reason:e}),addAnnotation:e=>f({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,n)=>f({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:n}}),addSubspan:(e,t,n,i={},a={},r=null)=>f({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:r}}),getId:()=>T,getMetricId:()=>C.metricId,markConstraintComplete:e=>f({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:y.Z?y.Z.now():0}}),removeConstraint:e=>f({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>f({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:C.constraints.includes(M)?e=>f({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},n={},i=null)=>f({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:i}}),stopSubspan:(e,t={},n={},i=null)=>f({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:i}})}}})({...t,annotateExperiments:c,navigationInfo:{navigationType:s,clientNavigation:n}}),p=(0,d.A)(),_=!!p;return(0,a.useEffect)(()=>{if(_){let e=p?.getMetricId(),t=e?(0,o.KJ)(e):null;(0,l.H)("nested_pwt_surface",{action:t})}},[_]),(0,T.jsx)(d.S,{value:m,children:e})}},67831:function(e,t,n){n.d(t,{A:()=>a,S:()=>i});let{Provider:i,getMaybe:a}=(0,n(729434).Z)("pwtSurfaceContext")},579358:function(e,t,n){n.d(t,{F9:()=>u,LM:()=>l,VZ:()=>r,cQ:()=>d,rZ:()=>o});var i=n(210811),a=n(901360);let r=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,o=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,s=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.attributes.poster.value;let t=((e.style||{}).backgroundImage||"").match(/^url\(["'](.*)["']\)$/);return t&&t[1]||null},l=()=>document.querySelector?document.querySelectorAll(i.wc).length:((0,a.H)("missing_document_query_selector"),0),u=()=>{let e=(()=>{if(!document.querySelector)return(0,a.H)("missing_document_query_selector"),null;let e=document.querySelectorAll(i.wc);return e[e.length-1]||null})();if(!e)return!1;let t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},d=(e,t,n)=>{if(!document.querySelector)return(0,a.H)("missing_document_query_selector"),[];let r={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},l=[i.Wf,...e?[i.fF]:[],...t?[i.$N]:[]].join(","),u=[...document.querySelectorAll(l)];if(n){let e=[...document.querySelectorAll('div[data-test-id="board-section"]')],t=e=>{let n=[...e.children];!n.length&&e.style.backgroundImage?u.push(e):n.length&&n.forEach(e=>{t(e)})};e.forEach(e=>{t(e)})}return u.reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement||n instanceof HTMLVideoElement&&t)&&((e,t)=>{let n=o(e);if(!n)return(0,a.H)("missing_client_rect"),!1;if(n.width<70&&n.height<70){if(e instanceof HTMLImageElement)return!1;let t=s(e);if(t?.endsWith("svg"))return!1}return(({top:e,height:t},{foldY:n,pageYOffset:i})=>{let a=e+i;if(a>=n)return!1;let r=Math.min(t,n-a);return r>.5*t||r>.2*n})(n,t)})(n,r)){let t=s(n);if(t){let i=(t||"").replace(/.*\//,"");return e.concat([{element:n,fileName:i}])}}return e},[])}},210811:function(e,t,n){n.d(t,{$N:()=>l,Kb:()=>i,Wf:()=>o,fF:()=>s,wc:()=>r});let i="pwt-grid-item",a=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${i}"]`],r=a.join(","),o=a.map(e=>`${e} img`).join(","),s=a.map(e=>`${e} div[style*=background-image]`).join(","),l=a.map(e=>`${e} video`).join(",")},891631:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(622481);function r(){return(0,i.useContext)(a.Z)}},594885:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(282803);function r(){return(0,i.useContext)(a.Z)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/95265-484faf0cdbffffcb.mjs.map